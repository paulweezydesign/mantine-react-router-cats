{"ast":null,"code":"import _slicedToArray from \"/workspaces/mantine-react-router-cats/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { forwardRef, useState, useEffect, useMemo } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport { MachineNumber } from './MachineNumber.js';\nimport useStyles from './Machine.styles.js';\nvar Machine = forwardRef(function (_ref, ref) {\n  var _ref$value = _ref.value,\n    value = _ref$value === void 0 ? 0 : _ref$value,\n    max = _ref.max;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    oldValue = _useState2[0],\n    setOldValue = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    newValue = _useState4[0],\n    setNewValue = _useState4[1];\n  var prevValueRef = usePrevious(value);\n  useEffect(function () {\n    if (typeof value === \"string\") {\n      setOldValue(void 0);\n      setNewValue(void 0);\n    } else if (typeof prevValueRef === \"string\") {\n      setOldValue(void 0);\n      setNewValue(value);\n    } else {\n      setOldValue(prevValueRef);\n      setNewValue(value);\n    }\n  }, [value, prevValueRef]);\n  var numbers = useMemo(function () {\n    if (typeof value === \"string\") {\n      return [];\n    }\n    if (value < 1) {\n      return [0];\n    }\n    var result = [];\n    var currentValue = value;\n    if (typeof max === \"number\") {\n      currentValue = Math.min(max, currentValue);\n    }\n    while (currentValue >= 1) {\n      result.push(currentValue % 10);\n      currentValue /= 10;\n      currentValue = Math.floor(currentValue);\n    }\n    result.reverse();\n    return result;\n  }, [value, max]);\n  var _useStyles = useStyles(null, {\n      name: \"machine\"\n    }),\n    classes = _useStyles.classes;\n  return typeof value === \"string\" ? /* @__PURE__ */React.createElement(\"span\", {\n    ref: ref\n  }, value) : /* @__PURE__ */React.createElement(\"span\", {\n    ref: ref,\n    className: classes.base\n  }, numbers.map(function (number, i) {\n    return /* @__PURE__ */React.createElement(MachineNumber, {\n      key: numbers.length - i - 1,\n      value: number,\n      oldOriginalNumber: oldValue,\n      newOriginalNumber: newValue\n    });\n  }), typeof max === \"number\" && value > max && /* @__PURE__ */React.createElement(\"span\", null, \"+\"));\n});\nexport { Machine };","map":{"version":3,"mappings":";;;;;AAIY,IAACA,OAAO,GAAGC,UAAU,CAAC,gBAAqBC,GAAG,EAAK;EAAA,sBAA1BC,KAAK;IAALA,KAAK,2BAAG,CAAC;IAAEC,GAAG,QAAHA,GAAG;EACjD,gBAAgCC,QAAQ,EAAE;IAAA;IAAnCC,QAAQ;IAAEC,WAAW;EAC5B,iBAAgCF,QAAQ,EAAE;IAAA;IAAnCG,QAAQ;IAAEC,WAAW;EAC5B,IAAMC,YAAY,GAAGC,WAAW,CAACR,KAAK,CAAC;EACvCS,SAAS,CAAC,YAAM;IACd,IAAI,OAAOT,KAAK,KAAK,QAAQ,EAAE;MAC7BI,WAAW,CAAC,KAAK,CAAC,CAAC;MACnBE,WAAW,CAAC,KAAK,CAAC,CAAC;IACzB,CAAK,MAAM,IAAI,OAAOC,YAAY,KAAK,QAAQ,EAAE;MAC3CH,WAAW,CAAC,KAAK,CAAC,CAAC;MACnBE,WAAW,CAACN,KAAK,CAAC;IACxB,CAAK,MAAM;MACLI,WAAW,CAACG,YAAY,CAAC;MACzBD,WAAW,CAACN,KAAK,CAAC;IACxB;EACA,CAAG,EAAE,CAACA,KAAK,EAAEO,YAAY,CAAC,CAAC;EACzB,IAAMG,OAAO,GAAGC,OAAO,CAAC,YAAM;IAC5B,IAAI,OAAOX,KAAK,KAAK,QAAQ,EAAE;MAC7B,OAAO,EAAE;IACf;IACI,IAAIA,KAAK,GAAG,CAAC,EAAE;MACb,OAAO,CAAC,CAAC,CAAC;IAChB;IACI,IAAMY,MAAM,GAAG,EAAE;IACjB,IAAIC,YAAY,GAAGb,KAAK;IACxB,IAAI,OAAOC,GAAG,KAAK,QAAQ,EAAE;MAC3BY,YAAY,GAAGC,IAAI,CAACC,GAAG,CAACd,GAAG,EAAEY,YAAY,CAAC;IAChD;IACI,OAAOA,YAAY,IAAI,CAAC,EAAE;MACxBD,MAAM,CAACI,IAAI,CAACH,YAAY,GAAG,EAAE,CAAC;MAC9BA,YAAY,IAAI,EAAE;MAClBA,YAAY,GAAGC,IAAI,CAACG,KAAK,CAACJ,YAAY,CAAC;IAC7C;IACID,MAAM,CAACM,OAAO,EAAE;IAChB,OAAON,MAAM;EACjB,CAAG,EAAE,CAACZ,KAAK,EAAEC,GAAG,CAAC,CAAC;EAChB,iBAAoBkB,SAAS,CAAC,IAAI,EAAE;MAAEC,IAAI,EAAE;IAAS,CAAE,CAAC;IAAhDC,OAAO,cAAPA,OAAO;EACf,OAAO,OAAOrB,KAAK,KAAK,QAAQ,kBAAmBsB,KAAK,CAACC,aAAa,CAAC,MAAM,EAAE;IAC7ExB,GAAG,EAAHA;EACJ,CAAG,EAAEC,KAAK,CAAC,kBAAmBsB,KAAK,CAACC,aAAa,CAAC,MAAM,EAAE;IACtDxB,GAAG,EAAHA,GAAG;IACHyB,SAAS,EAAEH,OAAO,CAACI;EACvB,CAAG,EAAEf,OAAO,CAACgB,GAAG,CAAC,UAACC,MAAM,EAAEC,CAAC;IAAA,sBAAqBN,KAAK,CAACC,aAAa,CAACM,aAAa,EAAE;MAC/EC,GAAG,EAAEpB,OAAO,CAACqB,MAAM,GAAGH,CAAC,GAAG,CAAC;MAC3B5B,KAAK,EAAE2B,MAAM;MACbK,iBAAiB,EAAE7B,QAAQ;MAC3B8B,iBAAiB,EAAE5B;IACvB,CAAG,CAAC;EAAA,EAAC,EAAE,OAAOJ,GAAG,KAAK,QAAQ,IAAID,KAAK,GAAGC,GAAG,mBAAoBqB,KAAK,CAACC,aAAa,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;AACxG,CAAC","names":["Machine","forwardRef","ref","value","max","useState","oldValue","setOldValue","newValue","setNewValue","prevValueRef","usePrevious","useEffect","numbers","useMemo","result","currentValue","Math","min","push","floor","reverse","useStyles","name","classes","React","createElement","className","base","map","number","i","MachineNumber","key","length","oldOriginalNumber","newOriginalNumber"],"sources":["/workspaces/mantine-react-router-cats/node_modules/@mantine/core/src/Indicator/Machine/Machine.tsx"],"sourcesContent":["import React, { useState, forwardRef, useMemo, useEffect } from 'react';\nimport { usePrevious } from '@mantine/hooks';\nimport { MachineNumber } from './MachineNumber';\nimport useStyles from './Machine.styles';\n\ninterface MachineNumberProps {\n  value: number | string;\n  max: number;\n}\n\nexport const Machine = forwardRef<HTMLDivElement, MachineNumberProps>(({ value = 0, max }, ref) => {\n  const [oldValue, setOldValue] = useState<number>();\n  const [newValue, setNewValue] = useState<number>();\n  const prevValueRef = usePrevious(value);\n\n  useEffect(() => {\n    if (typeof value === 'string') {\n      setOldValue(undefined);\n      setNewValue(undefined);\n    } else if (typeof prevValueRef === 'string') {\n      setOldValue(undefined);\n      setNewValue(value);\n    } else {\n      setOldValue(prevValueRef);\n      setNewValue(value);\n    }\n  }, [value, prevValueRef]);\n\n  const numbers = useMemo(() => {\n    if (typeof value === 'string') {\n      return [];\n    }\n\n    if (value < 1) {\n      return [0];\n    }\n\n    const result: number[] = [];\n    let currentValue = value;\n\n    if (typeof max === 'number') {\n      currentValue = Math.min(max, currentValue);\n    }\n\n    while (currentValue >= 1) {\n      result.push(currentValue % 10);\n      currentValue /= 10;\n      currentValue = Math.floor(currentValue);\n    }\n\n    result.reverse();\n    return result;\n  }, [value, max]);\n\n  const { classes } = useStyles(null, { name: 'machine' });\n\n  return typeof value === 'string' ? (\n    <span ref={ref}>{value}</span>\n  ) : (\n    <span ref={ref} className={classes.base}>\n      {numbers.map((number, i) => (\n        <MachineNumber\n          key={numbers.length - i - 1}\n          value={number}\n          oldOriginalNumber={oldValue}\n          newOriginalNumber={newValue}\n        />\n      ))}\n      {typeof max === 'number' && value > max && <span>+</span>}\n    </span>\n  );\n});\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}